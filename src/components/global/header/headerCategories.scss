@use '../../../common/scss/global.scss';

// Masonry layout configuration
$masonry-gap: 32px;
$masonry-column-width: 200px;
$masonry-max-columns: 6;
// Max width = (columns × column-width) + ((columns - 1) × gap)
$masonry-max-width: ($masonry-max-columns * $masonry-column-width) +
  (($masonry-max-columns - 1) * $masonry-gap);

:host {
  display: block;
  box-sizing: border-box;
  width: 100%;
}

@media (min-width: 672px) {
  :host {
    padding-right: 10%;
    width: calc(100vw - 230px);
    max-width: calc(100vw - 230px);
  }
}

.header-categories {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;

  &__inner {
    display: block;
    column-width: $masonry-column-width;
    column-gap: $masonry-gap;
    column-count: $masonry-max-columns;
    column-fill: initial;
    max-width: $masonry-max-width;
    box-sizing: border-box;
  }

  &__back-slot {
    display: block;
    margin-top: 16px;
  }
}

.header-categories__inner > * {
  break-inside: avoid;
  -webkit-column-break-inside: avoid;
  page-break-inside: avoid;
  margin: 0 0 $masonry-gap;
}

slot.header-categories__slot::slotted(*) {
  display: block;
  break-inside: avoid;
  -webkit-column-break-inside: avoid;
  page-break-inside: avoid;
  margin: 0 0 $masonry-gap;
}

/* ---------------------------------------------------------------------
   ROOT VIEW (MASONRY)

   Uses CSS multi-column layout for masonry effect:
   - Min column width: 200px
   - Max columns: 6
   - Gap: 32px

   Below ~1200px: columns stay closer to min-width for masonry feel
   Above ~1200px: columns expand to fill available space
   ------------------------------------------------------------------ */
:host(:not([view='detail'])) .header-categories__inner {
  column-width: $masonry-column-width;
  column-gap: $masonry-gap;
  column-count: $masonry-max-columns;
}

/* ---------------------------------------------------------------------
   DETAIL VIEW
   ------------------------------------------------------------------ */

:host([view='detail']) {
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  .header-categories {
    &__inner {
      overflow: auto;
    }
  }
}

:host([view='detail']) .header-detail-columns {
  display: flex;
  align-items: flex-start;
  gap: 0 $masonry-gap;
  width: max-content;
  box-sizing: border-box;
}

:host([view='detail']) .header-detail-columns > div {
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex: 0 0 160px;
}

:host([view='detail']) .header-detail-columns--single {
  max-width: 360px;
  width: auto;
}

:host([view='detail']) .header-detail-columns kyn-header-link {
  width: 100%;
  min-width: 0;
}

@media (min-width: 42rem) {
  :host([view='detail']) .header-detail-columns > div {
    min-width: 120px;
  }
}
