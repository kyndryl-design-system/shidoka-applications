@use '../../../common/scss/global.scss';

// Layout configuration
$column-gap: 32px;
$row-gap: 16px;
$min-wrapper-width: 450px;
$min-column-width: 150px;
$max-column-width: 400px;

:host {
  display: block;
  box-sizing: border-box;
  min-width: $min-wrapper-width;
}

// All column counts: fit to content, constrained by parent
:host([data-columns='1']),
:host([data-columns='2']),
:host([data-columns='3']),
:host([data-columns='4']),
:host([data-columns='5']),
:host([data-columns='6']),
:host([data-columns='7']),
:host([data-columns='8']),
:host([data-columns='9']),
:host([data-columns='10']) {
  width: 100%;
  max-width: 100%;
}

.header-categories {
  width: 100%;
  box-sizing: border-box;

  &__inner {
    display: grid;
    gap: $row-gap $column-gap;
    box-sizing: border-box;
    // Default: 3 columns with minimum width to fill space
    grid-template-columns: repeat(3, minmax($min-column-width, 1fr));
  }

  &__back-slot {
    display: block;
    margin-top: 16px;
  }
}

// Responsive grid using auto-fit - columns wrap naturally based on available space
// Max-width prevents columns from spreading too far when few categories exist
.header-categories__inner {
  grid-template-columns: repeat(
    auto-fit,
    minmax($min-column-width, $max-column-width)
  );
}

/* Grid items */
.header-categories__inner > kyn-header-category {
  min-width: 0; // Allow grid items to shrink for text truncation
}

/* ---------------------------------------------------------------------
   DETAIL VIEW
   ------------------------------------------------------------------ */

:host([view='detail']) {
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  .header-categories {
    &__inner {
      overflow: auto;
    }
  }
}

:host([view='detail']) .header-detail-columns {
  display: flex;
  align-items: flex-start;
  gap: 0 $column-gap;
  width: max-content;
  box-sizing: border-box;
}

:host([view='detail']) .header-detail-columns > div {
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex: 0 0 160px;
}

:host([view='detail']) .header-detail-columns--single {
  max-width: 360px;
  width: auto;
}

:host([view='detail']) .header-detail-columns kyn-header-link {
  width: 100%;
  min-width: 0;
}

@media (min-width: 42rem) {
  :host([view='detail']) .header-detail-columns > div {
    min-width: 120px;
  }
}
