@use '../../../common/scss/global.scss';

:host {
  display: block;
}

.account-switcher {
  display: flex;
  width: 100%;
  max-height: var(--kyn-account-switcher-max-height, none);
  background: var(--kd-color-background-container-default);
  border-radius: 8px;
  overflow: hidden;
}

/* Left panel */
.account-switcher__left {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 2px;
  width: 275px;
  flex-shrink: 0;
  padding: 12px;
  background: var(--kd-color-background-opacity-1);
  border-radius: 8px 0 0 8px;
  box-sizing: border-box;
  overflow-y: auto;
}

/* Right panel */
.account-switcher__right {
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex: 1;
  padding: 12px 8px 0 12px;
  box-sizing: border-box;
  overflow-y: auto;
}

/* Back button — mobile only, reuses menu-item variant="back" */
.account-switcher__back {
  margin-bottom: 8px;

  @media (min-width: 52rem) {
    display: none;
  }
}

.account-switcher__list {
  display: flex;
  flex-direction: column;
  gap: 2px;
  width: 100%;
}

/* Left-slot separator — universal header/list divider */
::slotted([slot='left']) {
  width: 100%;
  padding-bottom: 12px;
  margin-bottom: 12px;
  border-bottom: 1px solid var(--kd-color-border-variants-light);
  box-sizing: border-box;
}

/* Ensure slotted content fills available space */
::slotted([slot='left-list']),
::slotted([slot='right']),
::slotted([slot='right-list']) {
  width: 100%;
}

/* ===== Mobile drill-down ===== */
@media (max-width: calc(52rem - 0.001px)) {
  :host {
    width: 100%;
    height: var(--kyn-account-switcher-max-height, 100%);
    overflow: hidden;
  }

  .account-switcher {
    width: 100%;
    height: 100%;
    position: relative;
    overflow: hidden;
  }

  .account-switcher__left,
  .account-switcher__right {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    transition: transform 200ms ease-out;
    box-sizing: border-box;
  }

  .account-switcher__left {
    border-radius: 0;
    padding: 12px;
  }

  .account-switcher__right {
    padding: 12px;
  }

  /* Root view: left visible, right off-screen right */
  :host(:not([view='detail'])) {
    .account-switcher__left {
      transform: translateX(0);
    }

    .account-switcher__right {
      transform: translateX(100%);
    }
  }

  /* Detail view: left off-screen left, right visible */
  :host([view='detail']) {
    .account-switcher__left {
      transform: translateX(-100%);
    }

    .account-switcher__right {
      transform: translateX(0);
    }
  }

  @media (max-width: calc(42rem - 0.001px)) {
    .account-switcher {
      margin-top: 4px;
    }
  }
}
