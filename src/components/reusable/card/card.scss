@use '@kyndryl-design-system/shidoka-foundation/scss/mixins/elevation.scss';
@use '../../../common/scss/global.scss';
@use '@kyndryl-design-system/shidoka-foundation/scss/mixins/typography.scss';
@use '../../../common/scss/gradients.scss' as gradient;

:host {
  display: inline-block;
  width: 264px;
}

.card-wrapper.ai-connected.is-hover,
.card-wrapper.ai-connected:hover {
  --_title-color: var(--kd-color-text-title-ai-secondary);
  --_subtitle-color: var(--kd-color-text-level-primary);
  --_description-color: var(--kd-color-text-level-primary);
}

.card-wrapper.info-card.ai-connected {
  @include gradient.border-gradient-ai(
    $gradient: gradient.$ai-gradient-default,
    $radius: 8px,
    $width: 1px,
    $surface: var(--kd-color-background-ui-hollow-default)
  );
}

.ai-connected.card-wrapper-clickable:focus-visible {
  outline-color: var(--kd-color-border-variants-focus);
  outline-offset: -2px;
}

.card {
  &-wrapper,
  &-wrapper-clickable {
    position: relative;
    display: block;
    width: 100%;
    padding: 16px;
    border-radius: 8px;
    height: 100%;

    &.card-border {
      border: 1px solid var(--kd-color-border-card-clickable);
      box-shadow: var(--kd-elevation-level-1);
    }
  }

  &-wrapper {
    background-color: var(--kd-color-background-container-default);
    border: 1px solid var(--kd-color-border-card-default);

    &.ai-connected {
      background-color: var(--kd-color-background-ui-hollow-default);
    }

    &.ai-highlight {
      border: 1px solid var(--kd-color-border-button-ai-state-highlight);
      background: var(--kd-color-background-container-ai-default);
      color: var(--kd-color-text-level-primary);
    }
  }

  &-wrapper-clickable {
    color: unset;
    text-decoration: none;
    background-color: var(--kd-color-background-container-default);
    border: 1px solid transparent;
    outline: 2px solid transparent;
    outline-offset: 2px;
    transition: border-color 150ms ease-out, box-shadow 150ms ease-out,
      outline-color 150ms ease-out;

    &:not(.ai-connected).is-hover {
      border-color: var(--kd-color-border-ui-hover);
      @include elevation.shadow(2);
    }

    &:focus-visible {
      outline-color: var(--kd-color-border-variants-focus);
    }

    &.ai-connected {
      background-color: var(--kd-color-background-container-ai-subtle);
      border-color: transparent;
      box-shadow: none;

      &::after {
        content: '';
        position: absolute;
        inset: 0;
        pointer-events: none;
        border-radius: inherit;
        opacity: 0;
        transition: opacity 120ms linear;
        padding: 1px;
        background: gradient.$ai-gradient-default;
        -webkit-mask: linear-gradient(#000 0 0) content-box,
          linear-gradient(#000 0 0);
        -webkit-mask-composite: xor;
        mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
        mask-composite: exclude;
      }

      &.is-hover::after,
      &:hover::after {
        opacity: 1;
      }

      &.is-hover,
      &:hover {
        background: var(--kd-color-background-button-primary-ai-hover);
        ::slotted(.card-title) {
          color: var(--_title-color);
        }
        ::slotted(.card-subtitle),
        ::slotted(.card-description) {
          color: var(--_subtitle-color);
        }
      }

      &:active {
        @include elevation.shadow(4);
        box-shadow: var(--kd-elevation-level-2-overflow-ai);
      }
    }

    &.ai-highlight {
      background: var(--kd-color-background-container-ai-default);
      box-shadow: 0 2px 12px 0 var(--kd-color-utility-elevation-ai-l3);
      border-color: transparent;

      &::after {
        content: '';
        position: absolute;
        inset: 0;
        pointer-events: none;
        border-radius: inherit;
        padding: 1px;
        background: gradient.$ai-gradient-default;
        -webkit-mask: linear-gradient(#000 0 0) content-box,
          linear-gradient(#000 0 0);
        -webkit-mask-composite: xor;
        mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
        mask-composite: exclude;
        opacity: 1;
      }
    }
  }

  .card-wrapper.card-border,
  .card-wrapper-clickable.card-border {
    border: 1px solid var(--kd-color-border-card-clickable);
    @include elevation.shadow(1);
  }

  .card-wrapper.card-border-highlight,
  .card-wrapper-clickable.card-border-highlight {
    border: 1px solid var(--kd-color-background-highlight-border);
  }

  .card-wrapper.card-border.ai-connected,
  .card-wrapper-clickable.card-border.ai-connected {
    border-color: transparent;
  }

  &-highlight {
    background: var(--kd-color-background-highlight-fill);
    color: var(--kd-color-text-level-primary);
  }
}
